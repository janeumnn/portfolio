---
import config from '$/config';
import { obfuscate } from '$/utils/obfuscator';

const { author, socials } = config;
---

<section class="flex flex-col gap-8 p-2 pb-0 @xl/main:flex-row">
  <div class="space-y-8">
    <h1 class="text-2xl font-bold">Lorem ipsum dolor sit</h1>
    <p class="text-sm">
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit, minima pariatur quasi, est
      praesentium error doloribus aut enim fuga at porro repellat doloremque dolorem placeat a
      veritatis sapiente! Ipsum accusamus odio facilis vel. Eius, sunt? Impedit magnam illo
      voluptatem corporis ipsum provident aut ipsa. Pariatur sapiente unde eveniet aliquid illo!
    </p>
    <div class="flex flex-wrap gap-4">
      <a
        role="button"
        class="btn btn-circle btn-outline btn-sm"
        href={socials.github}
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Go to GitHub">
        <span class="icon-[ri--github-fill] h-full w-4"></span>
      </a>
      <a
        role="button"
        class="btn btn-circle btn-outline btn-sm"
        href={socials.linkedin}
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Go to LinkedIn">
        <span class="icon-[ri--linkedin-fill] h-full w-4"></span>
      </a>
      <a
        role="button"
        class="btn btn-circle btn-outline btn-sm"
        href={socials.instagram}
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Go to Instagram">
        <span class="icon-[ri--instagram-fill] h-full w-4"></span>
      </a>
      <a
        role="button"
        class="btn btn-circle btn-outline btn-sm"
        href={socials.monkeytype}
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Go to monkeytype">
        <span class="icon-[ri--keyboard-fill] h-full w-4"></span>
      </a>
      <a
        id="email-link"
        role="button"
        class="btn btn-sm btn-primary"
        href={`mailto:${obfuscate(author.email)}`}
        data-email-href={`mailto:${obfuscate(author.email)}`}
        aria-label="Send an email">
        Say hello
      </a>
    </div>
  </div>
  <div class="order-first flex items-start justify-center @xl/main:order-last">
    <div class="avatar avatar-placeholder">
      <div class="w-48 rounded-full bg-primary text-primary-content"></div>
    </div>
  </div>
</section>

<script>
  import { deobfuscate } from '$/utils/obfuscator';

  const emailLink = document.getElementById('email-link') as HTMLAnchorElement;
  if (emailLink) {
    const obfuscatedHref = emailLink.getAttribute('data-email-href');
    if (obfuscatedHref) {
      const obfuscatedEmail = obfuscatedHref.replace('mailto:', '');
      const deobfuscatedEmail = deobfuscate(obfuscatedEmail);
      emailLink.href = `mailto:${deobfuscatedEmail}`;
    }
  }
</script>
